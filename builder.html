<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary SEO -->
  <title>Coffee Christmas Gift Builder â€” Curated Coffee Gifts by Reece at Tasse & Groundwork</title>
  <meta name="description" content="Build a barista-approved coffee Christmas gift in minutes. Pick your budget, answer a few questions, and let Reece from Tasse curate the perfect bundle. Free collection from 15 Dec or UK delivery." />
  <link rel="canonical" href="https://bareecesta.co.uk/builder.html" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="author" content="Reece Jack â€” Tasse & Groundwork" />
  <meta name="theme-color" content="#5a2b10" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Coffee Christmas Gift Builder â€” Barista-Approved Gifts" />
  <meta property="og:description" content="Choose your budget, answer a couple of questions, and get a tailored coffee gift curated by Reece from Tasse Coffee and Groundwork." />
  <meta property="og:url" content="https://bareecesta.co.uk/builder.html" />
  <meta property="og:image" content="https://bareecesta.co.uk/assets/og-gift-builder.jpg" />

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Coffee Christmas Gift Builder â€” Barista-Approved Gifts" />
  <meta name="twitter:description" content="Barista-curated coffee bundles with free collection from 15 December or Â£5 UK delivery." />
  <meta name="twitter:image" content="https://bareecesta.co.uk/assets/og-gift-builder.jpg" />

  <!-- Fonts + Tailwind -->
  <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white text-black font-figtree">
  <!-- Sticky Announcement -->
  <div class="bg-[#5a2b10] text-white text-center py-2 text-sm font-medium sticky top-0 z-50">
    ðŸŽ„ Free collection starts Monday 15 December. UK delivery available (Â£5) that same week â€” weâ€™ll contact you to arrange a time.
  </div>

  <main class="max-w-4xl mx-auto px-6 py-12 sm:py-16">
    <h1 class="text-3xl sm:text-4xl font-bold text-center text-[#5a2b10] mb-8">Coffee Christmas Gift Builder</h1>

    <section class="text-center mb-8">
      <p class="text-neutral-700 mb-2">Iâ€™ve teamed up with my favourite coffee brands â€” <strong>MHWâ€‘3 Bomber</strong> and <strong>Orea</strong> â€” to make gifting easy.</p>
      <p class="text-neutral-700">Pick a budget, answer a couple of quick questions, and Iâ€™ll curate a baristaâ€‘approved bundle that lands just right.</p>
    </section>

    <!-- Step Indicators -->
    <div class="flex justify-center items-center gap-4 mb-8" id="steps">
      <div class="w-8 h-8 flex items-center justify-center rounded-full bg-[#5a2b10] text-white font-semibold">1</div>
      <div class="text-[#5a2b10] font-medium">Choose Budget</div>
      <div class="w-8 h-8 flex items-center justify-center rounded-full bg-[#e8dfcc] text-[#5a2b10] font-semibold">2</div>
      <div class="text-[#5a2b10] font-medium">Answer Questions</div>
      <div class="w-8 h-8 flex items-center justify-center rounded-full bg-[#e8dfcc] text-[#5a2b10] font-semibold">3</div>
      <div class="text-[#5a2b10] font-medium">Get Your Bundle</div>
    </div>

    <!-- Step 1 -->
    <section id="step1" class="rounded-3xl border border-neutral-200 bg-white p-6 shadow-sm md:p-8">
      <p class="text-center mb-6 text-neutral-700 font-medium">Pick your budget</p>
      <div class="grid grid-cols-3 gap-3 sm:gap-4">
        <button type="button" class="amount-btn rounded-2xl border border-neutral-200 px-4 py-4 text-lg font-semibold text-[#5a2b10] hover:shadow cursor-pointer" data-amount="25">Â£25</button>
        <button type="button" class="amount-btn rounded-2xl border border-neutral-200 px-4 py-4 text-lg font-semibold text-[#5a2b10] hover:shadow cursor-pointer" data-amount="50">Â£50</button>
        <button type="button" class="amount-btn rounded-2xl border border-neutral-200 px-4 py-4 text-lg font-semibold text-[#5a2b10] hover:shadow cursor-pointer" data-amount="100">Â£100</button>
      </div>

      <!-- Custom email button -->
      <div class="mt-6 flex justify-center">
        <a href="mailto:bareecesta@gmail.com?subject=Custom%20Coffee%20Gift%20Request&body=Hi%20Reece%2C%0A%0AMy%20budget%3A%20%5B%5D%0ARecipient%27s%20setup%20(espresso%2C%20V60%2C%20etc.)%3A%20%5B%5D%0ACollection%20or%20Delivery%3A%20%5B%5D%0ADeadline%3A%20%5B%5D%0A%0AAny%20notes%3A%20%5B%5D" class="inline-block rounded-full bg-[#5a2b10] text-white px-6 py-3 text-sm sm:text-base font-semibold hover:bg-[#4a1f0b] transition">Email Reece for a custom gift</a>
      </div>

      <div class="mt-6 text-center">
        <button type="button" id="toggleMore" class="text-sm font-semibold text-[#5a2b10] underline underline-offset-4">See more options</button>
      </div>

      <div id="moreTiers" class="mt-4 hidden">
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
          <button type="button" class="amount-btn rounded-2xl border border-neutral-200 px-4 py-3 font-semibold text-[#5a2b10] hover:shadow cursor-pointer" data-amount="15">Â£15</button>
          <button type="button" class="amount-btn rounded-2xl border border-neutral-200 px-4 py-3 font-semibold text-[#5a2b10] hover:shadow cursor-pointer" data-amount="75">Â£75</button>
          <button type="button" class="amount-btn rounded-2xl border border-neutral-200 px-4 py-3 font-semibold text-[#5a2b10] hover:shadow cursor-pointer" data-amount="250">Â£250</button>
          <button type="button" class="amount-btn rounded-2xl border border-neutral-200 px-4 py-3 font-semibold text-[#5a2b10] hover:shadow cursor-pointer" data-amount="500">Â£500</button>
        </div>
      </div>
    </section>

    <!-- Step 2 -->
    <section id="step2" class="hidden rounded-3xl border border-neutral-200 bg-white p-6 shadow-sm md:p-8 mt-8">
      <h2 class="text-xl font-semibold text-[#5a2b10] text-center mb-4">Quick Questions</h2>
      <div id="questionContainer"></div>
      <div id="autoUpgradeNotice" class="hidden mt-4 text-center text-sm text-[#5a2b10] font-medium"></div>
      <div class="mt-6 flex flex-col items-center gap-2">
        <button type="button" id="showRecommendation" disabled class="rounded-full bg-[#5a2b10] px-6 py-3 text-sm font-semibold text-white shadow transition disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white hover:text-[#5a2b10]">See Our Recommendation</button>
        <button type="button" id="changeAmount" class="text-sm font-semibold text-[#5a2b10] underline">Back to Start</button>
      </div>
    </section>

    <!-- Step 3 -->
    <section id="step3" class="hidden rounded-3xl border border-neutral-200 bg-white p-6 shadow-sm md:p-8 mt-8">
      <h2 class="text-xl font-semibold text-[#5a2b10] text-center mb-4">Recommended Bundle</h2>
      <div id="recCard" class="rounded-2xl bg-[#e8dfcc]/50 p-6 mb-4">
        <div id="recImages" class="relative w-full overflow-hidden rounded-xl aspect-[16/9] bg-white border border-[#5a2b10]/10"></div>
        <h3 id="recTitle" class="mt-4 text-lg font-semibold text-[#5a2b10]">Loadingâ€¦</h3>
        <p id="recBody" class="mt-2 text-neutral-800 text-sm">Weâ€™ll suggest a bundle based on your answers.</p>
        <div id="recBubbles" class="flex flex-wrap gap-2 mt-4"></div>
      </div>

      <!-- Upgrade option -->
      <label class="flex items-center gap-3 p-4 rounded-2xl bg-[#e8dfcc]/60">
        <input type="checkbox" id="upgradeBeans" class="h-5 w-5">
        <span class="text-sm text-[#5a2b10]"><strong>Upgrade beans</strong> to <em>Watermelon Co Ferment</em> for <strong>+Â£7.50</strong>.</span>
      </label>
      <p id="upgradeNote" class="hidden mt-2 text-xs text-neutral-600">Weâ€™ll email a secure Â£7.50 link for the upgrade right after checkout.</p>

      <div class="mt-6 flex flex-col items-center gap-3">
        <button id="restartBuilder" class="rounded-full bg-[#5a2b10] text-white px-6 py-3 font-semibold hover:bg-[#4a1f0b] transition">Back to Start</button>
        <a id="checkout" href="#" class="inline-block text-center rounded-full bg-[#5a2b10] text-white px-6 py-3 font-semibold hover:bg-[#4a1f0b] transition">Proceed to Checkout</a>
        <div class="text-center text-xs text-neutral-500">Checkout opens in a secure Stripe page.</div>
      </div>
    </section>
  </main>

  <script>
    // --- Data ---
    const paymentLinks = {
      15: 'https://buy.stripe.com/aFa14mfqf9mganw8Ix3F602',
      25: 'https://buy.stripe.com/7sY4gygujcysanwf6V3F600',
      50: 'https://buy.stripe.com/8x200iguj0PK9js6Ap3F603',
      75: 'https://buy.stripe.com/28EaEW4LBgOIeDM9MB3F601',
      100: 'https://buy.stripe.com/3cI00ifqfcys8fo8Ix3F604',
      250: 'https://buy.stripe.com/cNibJ01zp6a4fHQ4sh3F605',
      500: 'https://buy.stripe.com/00weVcemb1TOfHQe2R3F606'
    };

    const answers = { v60: null, espresso: null, grinder: null, kettle: null };
    let selectedAmount = null;

    // --- Elements ---
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const questionContainer = document.getElementById('questionContainer');
    const showRecBtn = document.getElementById('showRecommendation');
    const toggleMore = document.getElementById('toggleMore');
    const moreTiers = document.getElementById('moreTiers');
    const autoNotice = document.getElementById('autoUpgradeNotice');

    function setStep(n){
      const circles = document.querySelectorAll('#steps > div.w-8');
      circles.forEach((c,i)=>{
        if(i <= (n-1)*2){
          c.classList.remove('bg-[#e8dfcc]','text-[#5a2b10]');
          c.classList.add('bg-[#5a2b10]','text-white');
        } else {
          c.classList.remove('bg-[#5a2b10]','text-white');
          c.classList.add('bg-[#e8dfcc]','text-[#5a2b10]');
        }
      });
    }

    // Toggle extra tiers
    toggleMore.addEventListener('click', () => {
      moreTiers.classList.toggle('hidden');
      toggleMore.textContent = moreTiers.classList.contains('hidden') ? 'See more options' : 'See fewer options';
    });

    // Amount buttons
    document.querySelectorAll('.amount-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('ring-2','ring-[#5a2b10]'));
        btn.classList.add('ring-2','ring-[#5a2b10]');
        selectedAmount = Number(btn.dataset.amount);
        buildQuestions(selectedAmount);
        step1.classList.add('hidden');
        if(questionContainer.dataset.autoskip === 'true'){
          showRecommendation();
        } else {
          step2.classList.remove('hidden');
          setStep(2);
        }
      });
    });

    // Build questions according to spec
    function buildQuestions(amount){
      // reset
      answers.v60 = answers.espresso = answers.grinder = answers.kettle = null;
      showRecBtn.disabled = true;
      questionContainer.dataset.autoskip = 'false';
      autoNotice.classList.add('hidden');
      autoNotice.textContent = '';

      // Â£100 fixed bundle (no questions)
      if(amount === 100){
        questionContainer.innerHTML = '<p class="text-center text-sm text-neutral-600">No extra questions needed for this bundle.</p>';
        questionContainer.dataset.autoskip = 'true';
        return;
      }

      // Â£15, Â£75, Â£500 have no questions
      if([15,75,500].includes(amount)){
        questionContainer.innerHTML = '<p class="text-center text-sm text-neutral-600">No extra questions needed for this bundle.</p>';
        questionContainer.dataset.autoskip = 'true';
        return;
      }

      // Â£25 flow: Ask V60 first; if yes, ask Espresso
      if(amount === 25){
        questionContainer.innerHTML = `
          <div class="rounded-2xl bg-[#e8dfcc]/60 p-5 mb-4">
            <p class="font-medium text-[#5a2b10]">Do they have a V60 at home?</p>
            <div class="mt-3 flex gap-3">
              <button type="button" class="v60-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="no">No</button>
              <button type="button" class="v60-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="yes">Yes</button>
            </div>
          </div>
          <div id="follow25"></div>
        `;
        return;
      }

      // Â£50 flow: Ask V60; if NO -> auto move to Â£75, else ask Espresso
      if(amount === 50){
        questionContainer.innerHTML = `
          <div class="rounded-2xl bg-[#e8dfcc]/60 p-5 mb-4">
            <p class="font-medium text-[#5a2b10]">Do they have a V60 at home?</p>
            <div class="mt-3 flex gap-3">
              <button type="button" class="v60-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="no">No</button>
              <button type="button" class="v60-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="yes">Yes</button>
            </div>
          </div>
          <div id="follow50"></div>
        `;
        return;
      }

      // Â£250 flow: Kettle -> (if yes) Grinder
      if(amount === 250){
        questionContainer.innerHTML = `
          <div class="rounded-2xl bg-[#e8dfcc]/60 p-5 mb-4">
            <p class="font-medium text-[#5a2b10]">Do they have a temperature control gooseneck kettle?</p>
            <div class="mt-3 flex gap-3">
              <button type="button" class="kettle-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="no">No</button>
              <button type="button" class="kettle-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="yes">Yes</button>
            </div>
          </div>
          <div id="follow250"></div>
        `;
        return;
      }

      // default guard
      questionContainer.innerHTML = '<p class="text-center text-sm text-neutral-600">No extra questions needed for this bundle.</p>';
      questionContainer.dataset.autoskip = 'true';
    }

    // Delegated clicks for question buttons
    document.addEventListener('click', (e) => {
      // V60
      if(e.target.classList.contains('v60-btn')){
        answers.v60 = e.target.dataset.val;
        togglePickState(e.target, '.v60-btn');

        // Â£25 follow-up
        if(selectedAmount === 25){
          const f = document.getElementById('follow25');
          if(answers.v60 === 'no'){
            f.innerHTML = '';
            showRecBtn.disabled = false;
          } else {
            f.innerHTML = `
              <div class="rounded-2xl bg-[#e8dfcc]/60 p-5">
                <p class="font-medium text-[#5a2b10]">Do they have a home espresso machine?</p>
                <div class="mt-3 flex gap-3">
                  <button type="button" class="espresso-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="yes">Yes</button>
                  <button type="button" class="espresso-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="no">No</button>
                </div>
              </div>`;
            showRecBtn.disabled = true;
          }
        }

        // Â£50 follow-up
        if(selectedAmount === 50){
          const f = document.getElementById('follow50');
          if(answers.v60 === 'no'){
            // Auto-move to Â£75 package
            selectedAmount = 75;
            autoNotice.classList.remove('hidden');
            autoNotice.textContent = 'We\'ve moved you to our Â£75 bundle (best value for no V60 at home).';
            showRecommendation();
          } else {
            f.innerHTML = `
              <div class="rounded-2xl bg-[#e8dfcc]/60 p-5">
                <p class="font-medium text-[#5a2b10]">Do they have a home espresso machine?</p>
                <div class="mt-3 flex gap-3">
                  <button type="button" class="espresso-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="yes">Yes</button>
                  <button type="button" class="espresso-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="no">No</button>
                </div>
              </div>`;
            showRecBtn.disabled = true;
          }
        }
      }

      // Espresso
      if(e.target.classList.contains('espresso-btn')){
        answers.espresso = e.target.dataset.val;
        togglePickState(e.target, '.espresso-btn');
        showRecBtn.disabled = false;
      }

      // Kettle
      if(e.target.classList.contains('kettle-btn')){
        answers.kettle = e.target.dataset.val;
        togglePickState(e.target, '.kettle-btn');
        const f = document.getElementById('follow250');
        if(answers.kettle === 'yes'){
          f.innerHTML = `
            <div class="rounded-2xl bg-[#e8dfcc]/60 p-5">
              <p class="font-medium text-[#5a2b10]">Do they have a grinder?</p>
              <div class="mt-3 flex gap-3">
                <button type="button" class="grinder-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="no">No</button>
                <button type="button" class="grinder-btn rounded-full border border-[#5a2b10] px-5 py-2 text-sm font-semibold text-[#5a2b10] hover:bg-[#5a2b10] hover:text-white" data-val="yes">Yes</button>
              </div>
            </div>`;
          showRecBtn.disabled = true;
        } else {
          f.innerHTML = '';
          showRecBtn.disabled = false;
        }
      }

      // Grinder
      if(e.target.classList.contains('grinder-btn')){
        answers.grinder = e.target.dataset.val;
        togglePickState(e.target, '.grinder-btn');
        showRecBtn.disabled = false;
      }
    });

    function togglePickState(activeBtn, selector){
      document.querySelectorAll(selector).forEach(b => b.classList.remove('bg-[#5a2b10]','text-white'));
      activeBtn.classList.add('bg-[#5a2b10]','text-white');
    }

    // Show recommendation
    function showRecommendation(){
      const rec = getRecommendation(answers, selectedAmount);
      document.getElementById('recTitle').textContent = rec.title;
      document.getElementById('recBody').textContent = rec.body;
      buildBubbles(rec.bubbles || []);
      buildSlideshowSoft(rec.images || []);
      document.getElementById('checkout').href = paymentLinks[selectedAmount] || '#';
      step2.classList.add('hidden');
      step3.classList.remove('hidden');
      setStep(3);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.getElementById('showRecommendation').addEventListener('click', showRecommendation);

    // Back to start from Step 2
    document.getElementById('changeAmount').addEventListener('click', restart);
    // Back to start from Step 3
    document.getElementById('restartBuilder').addEventListener('click', restart);

    // Upgrade checkbox note
    const upgradeCb = document.getElementById('upgradeBeans');
    const upgradeNote = document.getElementById('upgradeNote');
    upgradeCb.addEventListener('change', () => {
      upgradeNote.classList.toggle('hidden', !upgradeCb.checked);
    });

    function restart(){
      document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('ring-2','ring-[#5a2b10]'));
      Object.keys(answers).forEach(k => answers[k] = null);
      selectedAmount = null;
      questionContainer.innerHTML = '';
      showRecBtn.disabled = true;
      step3.classList.add('hidden');
      step2.classList.add('hidden');
      step1.classList.remove('hidden');
      if(!moreTiers.classList.contains('hidden')){
        moreTiers.classList.add('hidden');
        toggleMore.textContent = 'See more options';
      }
      setStep(1);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Recommendation content per tier
    function getRecommendation(a, amount){
      if(amount === 15){
        return {
          title: 'Â£15 Gift â€” Beans & Brew',
          body: 'A 250g bag of Brazilian coffee with a personalised label, plus one free coffee at Tasse Specialty Coffee (Edinburgh).',
          bubbles: ['250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
          images: ['coffee.png']
        };
      }
      if(amount === 25){
        if(a.v60 === 'no'){
          return {
            title: 'Â£25 Gift â€” V60 Starter',
            body: 'A 4â€‘piece V60 set, a 250g customâ€‘label bag of Brazilian beans, and one free coffee at Tasse.',
            bubbles: ['V60 4â€‘piece set','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
            images: ['coffee.png']
          };
        }
        if(a.v60 === 'yes' && a.espresso === 'yes'){
          return {
            title: 'Â£25 Gift â€” Milk Pitcher Set',
            body: 'MHWâ€‘3 Bomber highâ€‘precision latte art pitcher plus a 250g customâ€‘label bag and a free coffee at Tasse.',
            bubbles: ['MHWâ€‘3 Bomber milk pitcher','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
            images: ['coffee.png']
          };
        }
        return {
          title: 'Â£25 Gift â€” Beans & Brew',
          body: 'A 250g customâ€‘label bag of Brazilian beans and a free coffee at Tasse.',
          bubbles: ['250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
          images: ['coffee.png']
        };
      }
      if(amount === 50){
        if(a.v60 === 'yes' && a.espresso === 'yes'){
          return {
            title: 'Â£50 Gift â€” Espresso Helper',
            body: 'MHWâ€‘3 Bomber milk pitcher + Fuego mini precision scales, customâ€‘label beans and a free coffee at Tasse.',
            bubbles: ['MHWâ€‘3 Bomber milk pitcher','Fuego mini precision scales','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
            images: ['coffee.png']
          };
        }
        if(a.v60 === 'yes' && a.espresso === 'no'){
          return {
            title: 'Â£50 Gift â€” Filter Pro',
            body: 'Fuego mini precision scales, vacuum bean container, customâ€‘label beans and a free coffee at Tasse.',
            bubbles: ['Fuego mini precision scales','Vacuum bean container','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
            images: ['coffee.png']
          };
        }
        // If v60=no we already bumped to Â£75; guard here
        return { title: 'Â£50 Gift', body: 'Answer the questions to see the best fit.', bubbles: [], images: [] };
      }
      if(amount === 75){
        return {
          title: 'Â£75 Gift â€” Filter Starter Plus',
          body: 'V60 brew setup with a compact gooseneck kettle and the essentials: a 250g customâ€‘label bag and a free coffee at Tasse.',
          bubbles: ['V60 brew set','Gooseneck kettle','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
          images: ['reggooseneck.png','reggooseneck1.png','coffee.png']
        };
      };
      }
      if(amount === 100){
        return {
          title: 'Â£100 Gift â€” Orea Z1 Brew Set',
          body: 'Orea Z1 brewer with 50 filters, custom 250g Brazilian beans, and a free coffee at Tasse.',
          bubbles: ['Orea Z1 brewer','50Ã— filter sheets','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
          images: ['z1brewer.png','z1brewer1.png','z1brewer2.png','coffee.png']
        };
      }
      if(amount === 250){
        if(a.kettle === 'no'){
          return {
            title: 'Â£250 Gift â€” Precision Brew Set',
            body: 'MHWâ€‘3 Bomber temperatureâ€‘control gooseneck kettle + Orea Z1 with 300 filters, custom beans and a free coffee at Tasse.',
            bubbles: ['MHWâ€‘3 Bomber tempâ€‘control kettle','Orea Z1 brewer','300Ã— filters','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
            images: ['gooseneck.png','gooseneck1.png','z1brewer.png','z1brewer1.png','z1brewer2.png','coffee.png']
          };
        }
        if(a.kettle === 'yes' && a.grinder === 'no'){
          return {
            title: 'Â£250 Gift â€” Grinder Upgrade Set',
            body: 'MHWâ€‘3 Bomber hand grinder + Orea Z1 with 300 filters, custom beans and a free coffee at Tasse.',
            bubbles: ['MHWâ€‘3 Bomber hand grinder','Orea Z1 brewer','300Ã— filters','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
            images: ['grinder.png','z1brewer.png','z1brewer1.png','z1brewer2.png','coffee.png']
          };
        }
        return {
          title: 'Â£250 Gift â€” Premium Coffee Kit',
          body: 'Orea Z1 with 300 filters, custom beans and a free coffee at Tasse.',
          bubbles: ['Orea Z1 brewer','300Ã— filters','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
          images: ['z1brewer.png','z1brewer1.png','z1brewer2.png','coffee.png']
        };
      }
      if(amount === 500){
        return {
          title: 'Â£500 Gift â€” MHWâ€‘3 Bomber Bâ€‘3 Suitcase',
          body: '12â€‘piece pro kit (Blade R3 grinder, smart scale, electric kettle, server, dripper, cups and more) + custom beans and a free coffee at Tasse.',
          bubbles: ['MHWâ€‘3 Bomber Bâ€‘3 suitcase (12â€‘piece)','250g Brazilian beans + custom label','1Ã— free coffee at Tasse'],
          images: ['grinder.png','gooseneck.png','coffee.png']
        };
      }
      return { title: 'Custom Gift', body: 'Your perfect coffee bundle, curated to match their setup.', bubbles: [], images: [] };
    }

    function buildBubbles(items){
      const wrap = document.getElementById('recBubbles');
      wrap.innerHTML = '';
      items.forEach(txt => {
        const chip = document.createElement('span');
        chip.className = 'inline-block rounded-full bg-white text-[#5a2b10] border border-[#5a2b10]/20 px-3 py-1 text-xs font-medium';
        chip.textContent = txt;
        wrap.appendChild(chip);
      });
    }

    // Simple slideshow
    let slideTimer = null;
    function buildSlideshowSoft(files){
      const host = document.getElementById('recImages');
      host.innerHTML = '';
      if(slideTimer){ clearInterval(slideTimer); slideTimer = null; }
      if(!files || !files.length){ return; }
      const img = document.createElement('img');
      img.alt = 'Bundle images';
      img.className = 'absolute inset-0 w-full h-full object-contain p-4 transition-opacity duration-500';
      host.appendChild(img);
      const dots = document.createElement('div');
      dots.className = 'absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2';
      host.appendChild(dots);
      let idx = 0;
      function render(){
        img.style.opacity = 0;
        setTimeout(()=>{ img.src = files[idx]; img.style.opacity = 1; }, 150);
        dots.innerHTML = '';
        files.forEach((_,i)=>{
          const d = document.createElement('span');
          d.className = 'h-2 w-2 rounded-full ' + (i===idx ? 'bg-[#5a2b10]' : 'bg-[#5a2b10]/30');
          d.addEventListener('click', ()=>{ idx=i; render(); });
          dots.appendChild(d);
        });
      }
      render();
      slideTimer = setInterval(()=>{ idx = (idx+1)%files.length; render(); }, 2200);
    }

  
    // Smooth crossfade slideshow
    function buildSlideshowSoft(files){
      const host = document.getElementById('recImages');
      host.innerHTML = '';
      if(window.slideTimer){ clearInterval(window.slideTimer); window.slideTimer = null; }
      if(!files || !files.length){ return; }

      host.className = 'relative aspect-[4/3] max-h-72 overflow-hidden rounded-2xl bg-white';
      const imgA = document.createElement('img');
      const imgB = document.createElement('img');
      [imgA,imgB].forEach(img => {
        img.alt = 'Bundle image';
        img.className = 'absolute inset-0 w-full h-full object-contain p-6 transition-opacity duration-700 ease-out opacity-0';
        host.appendChild(img);
      });

      let idx = 0, showA = true;
      function setSrc(img, file){ img.src = file; }
      function swap(){
        const file = files[idx];
        if(showA){ setSrc(imgA,file); imgA.style.opacity = 1; imgB.style.opacity = 0; }
        else { setSrc(imgB,file); imgA.style.opacity = 0; imgB.style.opacity = 1; }
        showA = !showA;
      }

      swap();
      window.slideTimer = setInterval(()=>{ idx = (idx+1)%files.length; swap(); }, 3500);
    }
  </script>
</body>
</html>

